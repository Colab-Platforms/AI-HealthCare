üîç VERCEL DEBUGGING GUIDE
=========================

CURRENT STATUS:
--------------
- Local: ‚úÖ All APIs working
- Vercel: ‚ùå APIs returning 404

PROBLEM:
--------
Vercel serverless functions are not loading routes properly.

TO DEBUG ON VERCEL:
------------------

1. CHECK VERCEL FUNCTION LOGS:
   - Go to Vercel Dashboard
   - Click on your project
   - Go to "Deployments"
   - Click on latest deployment
   - Click on "Functions" tab
   - Click on "api/index" function
   - Check the logs for errors

2. LOOK FOR THESE MESSAGES:
   ‚úÖ "üöÄ Running in Vercel serverless mode"
   ‚úÖ "‚úÖ Database connected"
   ‚ùå Any error messages about routes not loading
   ‚ùå Module not found errors
   ‚ùå Database connection errors

3. TEST SPECIFIC ENDPOINTS:
   
   A. Health Check (should always work):
      https://ai-health-care-three.vercel.app/api/health-check
   
   B. Auth Routes:
      POST https://ai-health-care-three.vercel.app/api/auth/login
      POST https://ai-health-care-three.vercel.app/api/auth/register
   
   C. Nutrition Routes:
      GET https://ai-health-care-three.vercel.app/api/nutrition/goals
      (needs Authorization header)

4. CHECK ENVIRONMENT VARIABLES:
   In Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables
   
   Required variables:
   ‚úÖ MONGODB_URI
   ‚úÖ JWT_SECRET
   ‚úÖ OPENROUTER_API_KEY
   ‚úÖ CLIENT_URL
   ‚úÖ NODE_ENV=production

5. CHECK BUILD LOGS:
   - Go to latest deployment
   - Check "Build Logs" tab
   - Look for any errors during build
   - Check if server dependencies installed correctly

COMMON ISSUES:
-------------

Issue 1: Routes not loading
Solution: Check if all route files exist in server/routes/

Issue 2: Database not connecting
Solution: Check MONGODB_URI in environment variables

Issue 3: Module not found
Solution: Check if all dependencies in server/package.json

Issue 4: Function timeout
Solution: Increase maxDuration in vercel.json

Issue 5: Memory limit
Solution: Increase memory in vercel.json

CURRENT CONFIGURATION:
---------------------

api/index.js:
- Loads environment variables
- Sets VERCEL=1
- Exports server/server.js

server/server.js:
- Detects Vercel environment
- Loads all routes
- Exports app when isVercel=true

vercel.json:
- Routes /api/* to /api/index
- Function memory: 1024MB
- Function timeout: 10s

NEXT STEPS:
----------

1. Check Vercel function logs (most important!)
2. Look for specific error messages
3. Share the error logs so I can fix the exact issue

The logs will tell us exactly what's failing!
