FOOD TRACKING & NUTRITION ANALYSIS - IMPLEMENTATION PLAN
=========================================================

GOAL: Complete health profile with food tracking, nutrition analysis, and personalized recommendations

PHASE 1: DATABASE MODELS (Backend)
===================================

1. FoodLog Model
   - userId
   - mealType (breakfast, lunch, dinner, snack)
   - foodItems: [
       {
         name: String,
         quantity: Number,
         unit: String (grams, ml, pieces, cups),
         calories: Number,
         protein: Number,
         carbs: Number,
         fats: Number,
         fiber: Number,
         vitamins: Object,
         minerals: Object
       }
     ]
   - totalNutrition: Object (calculated)
   - timestamp: Date
   - imageUrl: String (optional - food photo)
   - notes: String

2. HealthGoal Model
   - userId
   - goalType: String (weight_loss, weight_gain, muscle_gain, maintenance, health_improvement)
   - targetWeight: Number
   - currentWeight: Number
   - targetDate: Date
   - activityLevel: String (sedentary, light, moderate, active, very_active)
   - dailyCalorieTarget: Number (calculated)
   - macroTargets: {
       protein: Number,
       carbs: Number,
       fats: Number
     }
   - createdAt: Date
   - updatedAt: Date

3. NutritionSummary Model (Daily aggregation)
   - userId
   - date: Date
   - totalCalories: Number
   - totalProtein: Number
   - totalCarbs: Number
   - totalFats: Number
   - totalFiber: Number
   - mealsLogged: Number
   - waterIntake: Number (ml)
   - calorieGoal: Number
   - proteinGoal: Number
   - status: String (under, on_track, over)

PHASE 2: FOOD DATABASE & API INTEGRATION
=========================================

Option A: Use Existing Food API (Recommended)
   - Nutritionix API (https://www.nutritionix.com/business/api)
   - USDA FoodData Central API (Free)
   - Edamam Nutrition API
   - Spoonacular API

Option B: Build Custom Food Database
   - Create FoodItem collection with common Indian & international foods
   - Manually curate nutrition data
   - Allow users to add custom foods

Recommended: Start with USDA API (free) + custom Indian food database

PHASE 3: BACKEND API ENDPOINTS
===============================

Food Logging:
POST   /api/nutrition/log-food          - Log a meal
GET    /api/nutrition/logs              - Get food logs (with date filter)
GET    /api/nutrition/logs/:id          - Get specific log
PUT    /api/nutrition/logs/:id          - Update food log
DELETE /api/nutrition/logs/:id          - Delete food log
POST   /api/nutrition/search-food       - Search food database
POST   /api/nutrition/analyze-image     - AI food recognition from image

Health Goals:
POST   /api/nutrition/goals             - Set health goal
GET    /api/nutrition/goals             - Get current goals
PUT    /api/nutrition/goals/:id         - Update goal
GET    /api/nutrition/calculate-targets - Calculate calorie/macro targets

Nutrition Summary:
GET    /api/nutrition/summary/daily     - Today's nutrition summary
GET    /api/nutrition/summary/weekly    - Weekly summary
GET    /api/nutrition/summary/monthly   - Monthly summary
GET    /api/nutrition/progress          - Goal progress tracking

AI Recommendations:
POST   /api/nutrition/recommendations   - Get personalized recommendations
POST   /api/nutrition/meal-suggestions  - AI meal suggestions based on goals

PHASE 4: FRONTEND PAGES & COMPONENTS
=====================================

1. Food Tracking Page (/nutrition)
   Components:
   - Quick Add Meal button
   - Today's Summary Card (calories, macros, progress bars)
   - Meal Timeline (breakfast, lunch, dinner, snacks)
   - Food Search & Add Modal
   - Camera/Upload Image for food recognition
   - Water Intake Tracker
   - Nutrition Charts (daily/weekly trends)

2. Health Goals Page (/goals)
   Components:
   - Goal Setup Wizard
   - Current Goal Display
   - Progress Tracking
   - Weight Chart
   - Calorie Calculator
   - Activity Level Selector

3. Nutrition Dashboard (Enhanced Dashboard)
   Components:
   - Today's Nutrition Overview
   - Calorie Progress Ring
   - Macro Breakdown (Protein, Carbs, Fats)
   - Meal Suggestions
   - Quick Log Button
   - Weekly Trends

4. Meal Planner Page (/meal-plan)
   Components:
   - AI-Generated Weekly Meal Plan
   - Based on: health goals, deficiencies, preferences
   - Shopping List Generator
   - Recipe Suggestions

PHASE 5: AI INTEGRATION
========================

1. Food Recognition AI
   - Use Google Vision API or Clarifai
   - Identify food from photos
   - Estimate portion sizes
   - Return nutrition data

2. Personalized Recommendations
   Input Data:
   - Lab reports (deficiencies)
   - Wearable data (activity level, calories burned)
   - Food logs (current intake)
   - Health goals (target)
   - User preferences (dietary restrictions)

   AI Analysis:
   - Calculate optimal calorie intake
   - Recommend macro distribution
   - Suggest foods to increase/decrease
   - Create meal plans
   - Adjust based on progress

3. Smart Meal Suggestions
   - Time-based (breakfast time → breakfast suggestions)
   - Goal-based (muscle gain → high protein meals)
   - Deficiency-based (low iron → iron-rich foods)
   - Preference-based (vegetarian, vegan, etc.)

PHASE 6: CALCULATIONS & FORMULAS
=================================

1. Basal Metabolic Rate (BMR)
   Men: BMR = 10 × weight(kg) + 6.25 × height(cm) - 5 × age + 5
   Women: BMR = 10 × weight(kg) + 6.25 × height(cm) - 5 × age - 161

2. Total Daily Energy Expenditure (TDEE)
   TDEE = BMR × Activity Factor
   - Sedentary: 1.2
   - Light: 1.375
   - Moderate: 1.55
   - Active: 1.725
   - Very Active: 1.9

3. Calorie Targets Based on Goals
   - Weight Loss: TDEE - 500 (lose 0.5kg/week)
   - Weight Gain: TDEE + 500 (gain 0.5kg/week)
   - Muscle Gain: TDEE + 300-500
   - Maintenance: TDEE

4. Macro Distribution
   Weight Loss:
   - Protein: 30-35% (1.6-2.2g per kg body weight)
   - Carbs: 30-40%
   - Fats: 25-35%

   Muscle Gain:
   - Protein: 25-30% (1.8-2.5g per kg body weight)
   - Carbs: 45-55%
   - Fats: 20-30%

   Maintenance:
   - Protein: 20-25%
   - Carbs: 45-55%
   - Fats: 25-30%

PHASE 7: FEATURES TO IMPLEMENT
===============================

Essential Features (MVP):
✓ Manual food logging
✓ Food search (database)
✓ Daily nutrition summary
✓ Calorie tracking
✓ Macro tracking (protein, carbs, fats)
✓ Health goal setting
✓ Progress tracking
✓ Basic recommendations

Advanced Features (Phase 2):
- Food photo recognition
- Barcode scanning
- Recipe builder
- Meal planning
- Shopping list
- Water tracking
- Supplement tracking
- Restaurant menu integration
- Social features (share meals)
- Challenges & achievements

Integration Features:
- Sync with wearables (calories burned)
- Combine with lab reports (deficiencies)
- AI chat integration (ask about nutrition)
- Doctor recommendations (based on nutrition)

PHASE 8: USER FLOW EXAMPLE
===========================

Morning Routine:
1. User wakes up → Dashboard shows today's calorie goal
2. User eats breakfast → Opens app → "Log Meal"
3. Takes photo of food OR searches "oatmeal with banana"
4. App shows nutrition info → User confirms
5. Dashboard updates: 350/2000 calories, 15g/150g protein

Throughout Day:
- App sends reminders to log meals
- Shows progress bars (calories, protein, water)
- Suggests healthy snacks if under protein goal
- Warns if over calorie limit

Evening:
- User views daily summary
- App shows: "Great job! Hit protein goal. 200 calories remaining."
- Suggests dinner options within calorie budget
- Shows weekly progress chart

PHASE 9: TECHNICAL STACK
=========================

Backend:
- Node.js + Express (existing)
- MongoDB (existing)
- Food API: USDA FoodData Central (free)
- Image Recognition: Google Vision API or Clarifai
- AI: OpenRouter GPT-4o (existing)

Frontend:
- React (existing)
- Charts: Recharts (existing)
- Camera: react-webcam or native camera API
- Image Upload: react-dropzone (existing)

PHASE 10: IMPLEMENTATION PRIORITY
==================================

Week 1: Database & Backend
- Create models (FoodLog, HealthGoal, NutritionSummary)
- Integrate USDA Food API
- Build API endpoints for food logging
- Implement calorie/macro calculations

Week 2: Frontend - Food Tracking
- Create Nutrition page
- Build food search & add interface
- Implement daily summary dashboard
- Add meal timeline view

Week 3: Health Goals & Calculations
- Create Goals page
- Implement BMR/TDEE calculators
- Build goal setting wizard
- Add progress tracking

Week 4: AI Integration & Recommendations
- Integrate food recognition
- Build recommendation engine
- Create meal suggestions
- Enhance AI chat with nutrition context

Week 5: Polish & Testing
- Add charts and visualizations
- Implement notifications
- Test all features
- Deploy to production

NEXT STEPS
==========

1. Review this plan
2. Confirm features you want in MVP
3. I'll start implementing:
   - Database models
   - API endpoints
   - Frontend pages
   - AI integration

Would you like me to start building this system?
